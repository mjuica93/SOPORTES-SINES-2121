@echo off
title SINES Soportes - Despliegue en Render
color 0C

echo.
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo โ                                                              โ
echo โ              SINES SOPORTES - RENDER.COM                    โ
echo โ                                                              โ
echo โ           ๐ฐ OPCIรN SรPER FรCIL - $7/mes                     โ
echo โ                                                              โ
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo.
echo ๐ Configurando despliegue sรบper fรกcil en Render...
echo.
echo ๐ก Render.com es la opciรณn mรกs fรกcil de usar:
echo    โ Configuraciรณn en 2 clics
echo    โ URL permanente personalizada
echo    โ Disponibilidad 24/7
echo    โ SSL automรกtico
echo    โ Sin lรญmites de conexiรณn
echo    โ Interfaz sรบper amigable
echo    โ $7/mes
echo.

echo ๐ฆ Preparando archivos para Render...
echo.

REM Crear render.yaml para configuraciรณn automรกtica
echo web:
echo   name: sines-soportes
echo   env: python
echo   buildCommand: pip install -r requirements.txt
echo   startCommand: python server.py
echo   plan: starter
echo   envVars:
echo     - key: PORT
echo       value: 10000
echo     - key: PYTHON_VERSION
echo       value: 3.11.0
echo   healthCheck:
echo     path: /
echo     initialDelaySeconds: 30
echo     periodSeconds: 10
echo     timeoutSeconds: 5
echo     failureThreshold: 3
echo     successThreshold: 2
echo   autoDeploy: true
echo   rootDir: .
echo   dockerfilePath: ./Dockerfile
echo   buildFilter:
echo     paths:
echo       - "**/*.py"
echo       - "**/*.html"
echo       - "**/*.js"
echo       - "**/*.json"
echo       - "**/*.pdf"
echo   headers:
echo     - path: /*
echo       headers:
echo         X-Frame-Options: DENY
echo         X-Content-Type-Options: nosniff
echo         X-XSS-Protection: 1; mode=block
echo         Cache-Control: no-cache, no-store, must-revalidate
echo         Strict-Transport-Security: max-age=31536000; includeSubDomains
echo   redirects:
echo     - source: /
echo       destination: /index.html
echo       type: rewrite
echo     - source: /mobile
echo       destination: /index_mobile.html
echo       type: rewrite
echo   cors:
echo     allowedOrigins:
echo       - "*"
echo     allowedMethods:
echo       - GET
echo       - POST
echo       - OPTIONS
echo     allowedHeaders:
echo       - "*"
echo   disk:
echo     name: sines-storage
echo     mountPath: /app/storage
echo     sizeGB: 1
echo   scaling:
echo     minInstances: 1
echo     maxInstances: 3
echo   resources:
echo     cpu: 0.5
echo     memory: 1GB
echo   region: oregon
echo   preDeployCommand: echo "Preparando despliegue..."
echo   postDeployCommand: echo "ยกDespliegue completado!"
echo   dockerContext: .
echo   dockerfilePath: ./Dockerfile
echo   buildCommand: pip install -r requirements.txt
echo   startCommand: python server.py
echo   plan: starter
echo   env: python
echo   pythonVersion: 3.11.0
echo   port: 10000
echo   healthCheckPath: /
echo   autodeploy: true
echo   branch: main
echo   rootDir: .
echo   buildFilter:
echo     paths:
echo       - "**/*.py"
echo       - "**/*.html"
echo       - "**/*.js"
echo       - "**/*.json"
echo       - "**/*.pdf"
echo   envVars:
echo     - key: PORT
echo       value: 10000
echo     - key: PYTHON_VERSION
echo       value: 3.11.0
echo   headers:
echo     - path: /*
echo       headers:
echo         X-Frame-Options: DENY
echo         X-Content-Type-Options: nosniff
echo         X-XSS-Protection: 1; mode=block
echo         Cache-Control: no-cache, no-store, must-revalidate
echo         Strict-Transport-Security: max-age=31536000; includeSubDomains
echo   redirects:
echo     - source: /
echo       destination: /index.html
echo       type: rewrite
echo     - source: /mobile
echo       destination: /index_mobile.html
echo       type: rewrite
echo   cors:
echo     allowedOrigins:
echo       - "*"
echo     allowedMethods:
echo       - GET
echo       - POST
echo       - OPTIONS
echo     allowedHeaders:
echo       - "*"
echo   disk:
echo     name: sines-storage
echo     mountPath: /app/storage
echo     sizeGB: 1
echo   scaling:
echo     minInstances: 1
echo     maxInstances: 3
echo   resources:
echo     cpu: 0.5
echo     memory: 1GB
echo   region: oregon
echo   preDeployCommand: echo "Preparando despliegue..."
echo   postDeployCommand: echo "ยกDespliegue completado!"
echo   dockerContext: .
echo   dockerfilePath: ./Dockerfile
echo   buildCommand: pip install -r requirements.txt
echo   startCommand: python server.py
echo   plan: starter
echo   env: python
echo   pythonVersion: 3.11.0
echo   port: 10000
echo   healthCheckPath: /
echo   autodeploy: true
echo   branch: main
echo   rootDir: .
echo   buildFilter:
echo     paths:
echo       - "**/*.py"
echo       - "**/*.html"
echo       - "**/*.js"
echo       - "**/*.json"
echo       - "**/*.pdf"
echo   envVars:
echo     - key: PORT
echo       value: 10000
echo     - key: PYTHON_VERSION
echo       value: 3.11.0
echo   headers:
echo     - path: /*
echo       headers:
echo         X-Frame-Options: DENY
echo         X-Content-Type-Options: nosniff
echo         X-XSS-Protection: 1; mode=block
echo         Cache-Control: no-cache, no-store, must-revalidate
echo         Strict-Transport-Security: max-age=31536000; includeSubDomains
echo   redirects:
echo     - source: /
echo       destination: /index.html
echo       type: rewrite
echo     - source: /mobile
echo       destination: /index_mobile.html
echo       type: rewrite
echo   cors:
echo     allowedOrigins:
echo       - "*"
echo     allowedMethods:
echo       - GET
echo       - POST
echo       - OPTIONS
echo     allowedHeaders:
echo       - "*"
echo   disk:
echo     name: sines-storage
echo     mountPath: /app/storage
echo     sizeGB: 1
echo   scaling:
echo     minInstances: 1
echo     maxInstances: 3
echo   resources:
echo     cpu: 0.5
echo     memory: 1GB
echo   region: oregon
echo   preDeployCommand: echo "Preparando despliegue..."
echo   postDeployCommand: echo "ยกDespliegue completado!"
echo   dockerContext: .
echo   dockerfilePath: ./Dockerfile
echo   buildCommand: pip install -r requirements.txt
echo   startCommand: python server.py
echo   plan: starter
echo   env: python
echo   pythonVersion: 3.11.0
echo   port: 10000
echo   healthCheckPath: /
echo   autodeploy: true
echo   branch: main
echo   rootDir: .
echo   buildFilter:
echo     paths:
echo       - "**/*.py"
echo       - "**/*.html"
echo       - "**/*.js"
echo       - "**/*.json"
echo       - "**/*.pdf"
echo   envVars:
echo     - key: PORT
echo       value: 10000
echo     - key: PYTHON_VERSION
echo       value: 3.11.0
echo   headers:
echo     - path: /*
echo       headers:
echo         X-Frame-Options: DENY
echo         X-Content-Type-Options: nosniff
echo         X-XSS-Protection: 1; mode=block
echo         Cache-Control: no-cache, no-store, must-revalidate
echo         Strict-Transport-Security: max-age=31536000; includeSubDomains
echo   redirects:
echo     - source: /
echo       destination: /index.html
echo       type: rewrite
echo     - source: /mobile
echo       destination: /index_mobile.html
echo       type: rewrite
echo   cors:
echo     allowedOrigins:
echo       - "*"
echo     allowedMethods:
echo       - GET
echo       - POST
echo       - OPTIONS
echo     allowedHeaders:
echo       - "*"
echo   disk:
echo     name: sines-storage
echo     mountPath: /app/storage
echo     sizeGB: 1
echo   scaling:
echo     minInstances: 1
echo     maxInstances: 3
echo   resources:
echo     cpu: 0.5
echo     memory: 1GB
echo   region: oregon
echo   preDeployCommand: echo "Preparando despliegue..."
echo   postDeployCommand: echo "ยกDespliegue completado!"
echo   dockerContext: .
echo   dockerfilePath: ./Dockerfile
echo   buildCommand: pip install -r requirements.txt
echo   startCommand: python server.py
echo   plan: starter
echo   env: python
echo   pythonVersion: 3.11.0
echo   port: 10000
echo   healthCheckPath: /
echo   autodeploy: true
echo   branch: main
echo   rootDir: .
echo   buildFilter:
echo     paths:
echo       - "**/*.py"
echo       - "**/*.html"
echo       - "**/*.js"
echo       - "**/*.json"
echo       - "**/*.pdf"
echo   envVars:
echo     - key: PORT
echo       value: 10000
echo     - key: PYTHON_VERSION
echo       value: 3.11.0
echo   headers:
echo     - path: /*
echo       headers:
echo         X-Frame-Options: DENY
echo         X-Content-Type-Options: nosniff
echo         X-XSS-Protection: 1; mode=block
echo         Cache-Control: no-cache, no-store, must-revalidate
echo         Strict-Transport-Security: max-age=31536000; includeSubDomains
echo   redirects:
echo     - source: /
echo       destination: /index.html
echo       type: rewrite
echo     - source: /mobile
echo       destination: /index_mobile.html
echo       type: rewrite
echo   cors:
echo     allowedOrigins:
echo       - "*"
echo     allowedMethods:
echo       - GET
echo       - POST
echo       - OPTIONS
echo     allowedHeaders:
echo       - "*"
echo   disk:
echo     name: sines-storage
echo     mountPath: /app/storage
echo     sizeGB: 1
echo   scaling:
echo     minInstances: 1
echo     maxInstances: 3
echo   resources:
echo     cpu: 0.5
echo     memory: 1GB
echo   region: oregon
echo   preDeployCommand: echo "Preparando despliegue..."
echo   postDeployCommand: echo "ยกDespliegue completado!"
echo   dockerContext: .
echo   dockerfilePath: ./Dockerfile > render.yaml

REM Crear servidor optimizado para Render
echo import os > server_render.py
echo import http.server >> server_render.py
echo import socketserver >> server_render.py
echo import webbrowser >> server_render.py
echo import threading >> server_render.py
echo import time >> server_render.py
echo. >> server_render.py
echo def start_server(): >> server_render.py
echo     PORT = int(os.environ.get('PORT', 10000)) >> server_render.py
echo. >> server_render.py
echo     class MyHTTPRequestHandler(http.server.SimpleHTTPRequestHandler): >> server_render.py
echo         def end_headers(self): >> server_render.py
echo             self.send_header('Access-Control-Allow-Origin', '*') >> server_render.py
echo             self.send_header('Access-Control-Allow-Methods', 'GET, POST, OPTIONS') >> server_render.py
echo             self.send_header('Access-Control-Allow-Headers', 'Content-Type') >> server_render.py
echo             self.send_header('Cache-Control', 'no-cache, no-store, must-revalidate') >> server_render.py
echo             super().end_headers() >> server_render.py
echo. >> server_render.py
echo     try: >> server_render.py
echo         with socketserver.TCPServer(("", PORT), MyHTTPRequestHandler) as httpd: >> server_render.py
echo             print(f"๐ Servidor iniciado en puerto {PORT}") >> server_render.py
echo             print(f"๐ Sirviendo archivos desde: {os.getcwd()}") >> server_render.py
echo             print("โ Sistema listo para Render!") >> server_render.py
echo             httpd.serve_forever() >> server_render.py
echo     except Exception as e: >> server_render.py
echo         print(f"โ Error: {e}") >> server_render.py
echo. >> server_render.py
echo if __name__ == "__main__": >> server_render.py
echo     start_server() >> server_render.py

REM Crear requirements.txt minimalista
echo # Proyecto SINES - Solo usa librerรญas estรกndar de Python > requirements.txt
echo # No requiere dependencias externas >> requirements.txt

echo.
echo โ Archivos preparados para Render
echo.
echo ๐ง Pasos para desplegar en Render:
echo.
echo    1. Ve a: https://render.com
echo    2. Crea una cuenta gratuita
echo    3. Clic en "New +"
echo    4. Selecciona "Web Service"
echo    5. Conecta tu repositorio Git (o sube esta carpeta)
echo    6. Configuraciรณn:
echo       - Build Command: pip install -r requirements.txt
echo       - Start Command: python server_render.py
echo       - Plan: Starter ($7/mes)
echo    7. Clic en "Create Web Service"
echo.
echo ๐ฏ Tu sistema estarรก disponible en:
echo    https://tu-proyecto.onrender.com
echo.
echo ๐ฑ Para acceso mรณvil:
echo    https://tu-proyecto.onrender.com/index_mobile.html
echo.
echo ๐ฐ Costo: $7/mes
echo ๐ Disponibilidad: 24/7
echo ๐ SSL: Automรกtico
echo ๐ Escalabilidad: Automรกtica
echo.
echo ๐ก Render es la opciรณn mรกs fรกcil de configurar
echo.
pause 